## 扫盲

### 1、什么是内网IP

内网（局域网：具备相同的DNS和默认网关，并且由相同的路由器下发的IP[简单来说就是链接相同一个wifi(但不是很准确)]），限定在一定区域内访问的

- 自测（开发自己测试）
- 内测（上传到公司内网测试服务器上，交由给公司测试进行Bug追踪）
- 公测（产品正式部署到外网服务器上）

### 2、什么是外网IP

外网是不管是不是在同一个网段，用户都可以通过外网IP访问到你的服务器（一般我们会在服务器上做处理，禁止直接通过IP访问）



## 当我们在浏览器中输入一个URL地址，到最后看到页面，都经历了哪些事情？

> **[Request请求阶段]** 客服端通过一系列方式找到服务器
>
> 1、首先根据客户端输入的域名，到DNS服务器上进行反解析（通过域名找到对应服务器的外网IP）
>
> 2、通过找到的外网IP，找到对应的服务器
>
> 3、通过在地址中输入的端口号（没输入是因为不同协议有自己默认端口号）找到服务器上发布的对应的项目
>
> **[Response 响应阶段]** 服务器接收到请求 把东西返回给客户端
>
> 4、服务器获取到请求资源文件的地址，`例如:/stu/index.html`，把资源文件中的`原代码`找到
>
> 5、服务器会把找到的原代码返回给客户端（通过HTTP等传输协议返回的）
>
> **[浏览器自主渲染]**
>
> 6、客户端收到原代码后，会交给浏览器的内核（渲染引擎）进行渲染，最后由浏览器绘制出对应的页面



首部就是说明书，说明是哪来干嘛的，修饰数据的

## URL、URI、URN

URI：统一资源标识符

URL：统一资源路劲地址

URN：统一资源名称

URI=URL+URN

### 一个完整的URL

一个完整的URL包含了很多部分：`http://www.zhufengpeixun.cn/stu/index/html?name=zf&age=9&teacher=zxt#good`

#### 第一部分：传输协议 http://

用来完成客户端和服务器端的数据（内容）传输的。类似于快递小哥，负责把客户和商家的物品来回传递。

1、客户端不仅可以向服务器发送请求，而且还可以把一些内容传递给服务器

2、服务器端也可以把信息或者内容返回给客户端

客户端和服务器端传输的内容总称为HTTP报文，这些报文信息都是基于传输协议完成传输的。客户端传递给服务器叫做请求（Request），服务器返回给客户端叫做相应（Response），request+response两个阶段统称为一个HTTP事务（事务：一件完整的事情）

##### HTTP事务：

- 1、当客户端向服务器端发送请求，此时客户端和服务器端会建立一个传输（连接）通道，传输协议就是基于这个通道把信息传输的
- 2、当服务器接受到请求信息，把内容返回到客户端后，传输通道会自动销毁关闭

##### 传输协议分类（相当于不同的快递公司）

- http：超文本传输协议（客户端和服务器端传输的内容，除了文本意外，还可以传输图- 片、音视频等文件流[二进制编码/BASE64]，以及传输xml格式的数据等），是目前市场上应用最广泛的传输协议
- https：http+ssl，它比http更加安全，因为数据内容的传输通道是经过ssl加密的（它需要在服务器端进行特殊的处理），所以涉及资金类的网站一般都是https协议的
- ftp：资源文件传输协议，一般用于客户端把资源文件（不是代码内容）上传到服务器端，或者从服务器端下载一些资源文件（一般ftp传输的内容会比http这类协议传输内容多）

##### HTTP报文

比如你在深圳要买上海的某个东西，要买的东西写了个信息单子，填完后叫了顺丰快递帮我邮东西，商家收到信息准备好，又叫顺丰邮寄了过来。顺丰就相当于传输协议，我给商家的东西和商家给我的东西就相当于报文，报文就相当于内容的总称，请求+响应就是事务。

1、起始行

- 请求起始行
- 响应起始行

2、首部（头）

- 请求头：内置请求头（天生有的）、自定义请求头
- 响应头：内置响应投、自定义响应头
- 通用头：请求和响应都有的

3、主体

- 请求主体
- 响应主体

请求XXX都是客户端设置的信息，服务器获取这些信息

响应XXX都是服务器端设置的信息，客户端用来接受这些信息

在谷歌浏览器控制台network选项中，我们可以看见当前客户端和服务器端交互的全部信息

General 通用头（Remote Address外网IP地址）

Response 响应主体

**总结：**

客户端传递给服务器端数据

1、可以通过URL问号传递参数

2、设置请求头

3、设置请求主体

服务器端返回给客户端内存

1、设置响应头（例如服务器时间）

2、设置响应主体

……

网站性能优化核心点：减少HTTP请求次数和减少HTTP请求大小

#### 第二部门：域名

设置域名其实就是给不好记忆的服务器外网IP设置了一个好记忆的名字

顶级域名（一级域名）：qq.com

二级域名：www.qq.com、v.qq.com 

三级域名：kbs.sports.qq.com

#### 第三部分：端口号

在服务器发布项目的时候，我们可以通过端口号区分当前服务器上不同的项目

一台服务器端口号取值范围：0-65535之间，如果电脑上安装了很多程序，有一些端口号是被占用了

HTTP协议：默认端口号80

HTTPS协议：443

FTP：21

对于上述三个端口号其实是很重要的，如果被其他程序占用，我们则不能使用了；所以服务器上一般是禁止安装其他程序的 

#### 第四部分：请求资源文件的路径名称

> /stu/index.html

在服务器中发布项目的时候，我们一般都会配置一些默认的文档，用户即使不输入请求文件的名称，服务器也会找到默认文件（一般默认文档都是index/default）

我们经常为了做seo优化，会把一些动态页面地址（xxx.php、xxx.aspx、xxx.asp、xxx.jsp……）进行伪URL重写（需要服务器处理的）

https://item.jd.com/4325427.html

不可能是有一个商品，自己就单独写一个详情页，肯定是同一个详情页做的不同处理

1）第一种方案：

由后台语言根据详情页模板动态生成具体的详情页面

2）第二种方案：

当前页面就是一个页面，例如：detail.html / detail.php……，我们做详情页面的时候，开发时按照detail.html?id=4325427来开发的，但是这种页面不方便做seo优化，此时我们把真实的地址进行重写，重写为我们看到的4325427.html

#### 第五部分：问号传参

> ?name=zf&age=9……

把一些值通过XXX=XXX的方式，放在一个URL的末尾，通过问号传参

【作用】

1、在AJAX请求中，我们可以通过问号传递参数的方式，客户端把一些信息传递给服务器，服务器根据不同信息的不一样，返回不同的数据

```javascript
// $.ajax(url,{})
// $.get(url,function(){}); 对于AJAX请求的特殊写法，原理还是基于AJAX方法实现的 $.post / $.script

$.ajax({
	url:"getPersonInfo?id=12"
    ...
})
// 我们传递给服务器的编号是多少，服务器就会把对应编号的人员信息给返回
```

2、消除AJAX请求中GET方法缓存

```javascript
$.ajax({
    url:'xxx?_=0.12345',
    method:'get'
})
// 我们会在请求URL的末尾追加一个随机数（_=随机数），保证每一次请求的URL都是不一样的，以此消除GET请求遗留的缓存问题
```

3、通过URL传参的方式，可以实现页面之间信息的通信，例如：我们有两个页面A和B，A是列表页，B是详情页。点击A中的某一条信息，进入到唯一的详情页B，如何展示不同的信息，这种操作就可基于URL问号传递参数来实现了

例如：

在进入到game.html页面的时候，我们可以获取URL传递的参数值，根据传递参数值的不一样，从服务器端获取不同的数据展示

在列表页面进行页面跳转的时候，我们需要记住的是跳转的同时传递不同的参数值

```html
<a href='game.html?mid=xxx'>
```

#### 第六部分：HASH值

> \#xxx

URL末尾传递的井号XXX，就是HASH值（哈希值）

【作用】

1、页面中的锚点定位

2、前段路由（SPA单页面开发多数都是用这个）